function getMes(){var b=new Base64();var JsonData={"userName":getCookie("userName"),"password":getCookie("password"),};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/LoginCommonServlet",data:{"strLoginCommon":JSON.stringify(JsonData)},async:false,error:function(request){alert("获取状态失败，请稍后")},success:function(data){var objs=eval(data);for(var j=0;j<objs.length;j++){var aa=new Array();aa[1]=objs[j].userName;aa[3]=objs[j].createTime;aa[5]=objs[j].phoneNumber;aa[6]=objs[j].email;aa[7]=objs[j].hotelName;aa[8]=objs[j].hotelGrade;aa[10]=objs[j].loginRoleLevel}var str=b.decode(aa[1]);document.getElementById("userName").value=str;document.getElementById("createTime").value=aa[3];document.getElementById("phoneNumber").value=aa[5];document.getElementById("email").value=aa[6];document.getElementById("hotelName").value=aa[7];document.getElementById("hotelGrade").value=aa[8];document.getElementById("loginRoleLevel").value=aa[10]}});return false}function employeeManage(E){var D=new Base64();var C=D.encode(E.userName0);var B=D.encode(E.password0);var A={"userName":getCookie("userName"),"password":getCookie("password"),"userName0":C,"password0":B,"registerName":E.registerName,"phoneNumber":E.phoneNumber,"loginRole":E.loginRole,};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/UserRegisterEmployeeServlet",data:{"strInsertRegisterEmployee":JSON.stringify(A)},async:false,error:function(F){alert("获取状态失败，请稍后")},success:function(F){if(F=="200"){alert("添加成功!");reload();return false}alert("添加失败！")}});return false}function getRooms(){var JsonData={"userName":getCookie("userName"),"password":getCookie("password"),};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/RoomSelectServlet",data:{"strSelectRoom":JSON.stringify(JsonData)},async:false,error:function(request){alert("获取状态失败，请稍后")},success:function(data){var obj=JSON.parse(data);var objs=eval(data);for(var j=0;j<objs.length;j++){var aa=new Array();aa[0]=objs[j].roomType;aa[1]=objs[j].roomName;aa[2]=objs[j].roomNumber;aa[3]=objs[j].roomInitalPrice;aa[4]=objs[j].roomSpecialDatePrice;setData(aa)}}});return false}function setData(A){setTable(1,A)}function setTable(F,A){var C=document.getElementById("houseStatusTable");var D;var E;for(var B=0;B<F;B++){D=document.createElement("tr");document.getElementById("houseStatusTable").appendChild(D);for(var G=0;G<A.length;G++){E=document.createElement("td");E.innerText=A[G];D.appendChild(E)}E=document.createElement("td");E.innerHTML='<input type=\'button\' value="删除" onclick="deleteRooms(this)"class="layui-btn layui-btn-primary"/>';D.appendChild(E)}}function ChangeRooms(E){if(confirm("确认修改吗?")){}else{return}var C=tdObj.parentNode.parentNode;var B=new Array();for(var A=0;A<C.cells.length;A++){B[A]=C.cells[A].innerHTML}var D={"userName":getCookie("userName"),"password":getCookie("password"),"roomNumber":B[2]};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/RoomDeleteServlet",data:{"strRoomDelete":JSON.stringify(D)},async:false,error:function(F){alert("获取状态失败，请稍后")},success:function(F){location.reload()}});return false;layer.open({type:1,closeBtn:true,shift:2,shadeClose:true,content:$("#box1")})}function insertRooms(B){var A={"userName":getCookie("userName"),"password":getCookie("password"),"roomType":B.roomType,"roomName":B.roomName,"roomNumber":B.roomNumber,"roomInitalPrice":B.roomInitalPrice,"roomSpecialDatePrice":B.roomSpecialDatePrice,"roomNote":B.roomNote,};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/RoomSetupServlet",data:{"strRoomSetup":JSON.stringify(A)},async:false,error:function(C){alert("添加失败，请联系管理员")},success:function(C){if(C=="800"){alert("房间号冲突，请更换");return false}if(C=="200"){alert("添加成功");reload();return false}}});return false}function deleteRooms(E){if(confirm("确认删除吗")){}else{return}var C=E.parentNode.parentNode;var B=new Array();for(var A=0;A<C.cells.length;A++){B[A]=C.cells[A].innerHTML}var D={"userName":getCookie("userName"),"password":getCookie("password"),"roomNumber":B[2]};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/RoomDeleteServlet",data:{"strRoomDelete":JSON.stringify(D)},async:false,error:function(F){alert("获取状态失败，请稍后")},success:function(F){location.reload()}});return false}function getCommisionMes(){var aa=new Array();var JsonData={"userName":getCookie("userName"),"password":getCookie("password"),};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/CompensasenSelectServlet",data:{"strSelectCompensasen":JSON.stringify(JsonData)},async:false,error:function(request){alert("获取状态失败，请稍后")},success:function(data){if(data=="0"){document.getElementById("compensasenQuNaErSolid").value=0;document.getElementById("compensasenXieChengSolid").value=0;document.getElementById("compensasenFeiZhuSolid").value=0;document.getElementById("compensasenYiLongSolid").value=0}else{var objs=eval(data);for(var j=0;j<objs.length;j++){aa[0]=objs[j].compensasenQuNaErSolid;aa[1]=objs[j].compensasenXieChengSolid;aa[2]=objs[j].compensasenFeiZhuSolid;aa[3]=objs[j].compensasenYiLongSolid}document.getElementById("compensasenQuNaErSolid").value=aa[0];document.getElementById("compensasenXieChengSolid").value=aa[1];document.getElementById("compensasenFeiZhuSolid").value=aa[2];document.getElementById("compensasenYiLongSolid").value=aa[3]}}});return false}function changeCommision(B){var A={"userName":getCookie("userName"),"password":getCookie("password"),"compensasenFeiZhuSolid":B.compensasenFeiZhuSolid,"compensasenYiLongSolid":B.compensasenYiLongSolid,"compensasenXieChengSolid":B.compensasenXieChengSolid,"compensasenQuNaErSolid":B.compensasenQuNaErSolid,};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/CompensasenUpdateServlet",data:{"strCompensasenUpdate":JSON.stringify(A)},async:false,error:function(C){alert("添加失败，请联系管理员")},success:function(C){if(C=="200"){alert("修改成功");reload();return false}else{if(C=="800"){alert("修改失败，请稍后再试！");return false}}}});return false}function form2(B){var A={"userName":getCookie("userName"),"password":getCookie("password"),"compensasenFeiZhuSolid":B.compensasenFeiZhuSolid,"compensasenYiLongSolid":B.compensasenYiLongSolid,"compensasenXieChengSolid":B.compensasenXieChengSolid,"compensasenQuNaErSolid":B.compensasenQuNaErSolid,};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/CompensasenSetupServlet",data:{"strCompensasenSetup":JSON.stringify(A)},async:false,error:function(C){alert("添加失败，请联系管理员")},success:function(C){if(C=="200"){alert("添加成功");reload();return false}else{if(C=="800"){alert("已设置佣金比例!");return false}}}});return false}function getEmployee(){var JsonData={"userName":getCookie("userName"),"password":getCookie("password"),};$.ajax({cache:true,type:"POST",url:getUrl()+"/HotelPMS/UserRegisterEmployeeSelectServlet",data:{"strUserRegisterEmployeeSelect":JSON.stringify(JsonData)},async:false,error:function(request){alert("获取状态失败，请稍后")},success:function(data){if(data=="250"){alert("权限不够，请联系管理员！联系电话：0888-5191803")}var obj=JSON.parse(data);var objs=eval(data);for(var j=0;j<objs.length;j++){var aa=new Array();var b=new Base64();aa[0]=b.decode(objs[j].userName);aa[1]=objs[j].registerName;aa[2]=objs[j].phoneNumber;aa[3]=objs[j].createTime;if(objs[j].loginRole==2){aa[4]="员工"}else{if(objs[j].loginRole==1){aa[4]="店长"}}setData2(aa)}}});return false}function setData2(A){setTable2(1,A)}function setTable2(F,A){var C=document.getElementById("employeeTable");var D;var E;for(var B=0;B<F;B++){D=document.createElement("tr");document.getElementById("employeeTable").appendChild(D);for(var G=0;G<A.length;G++){E=document.createElement("td");E.innerText=A[G];D.appendChild(E)}E=document.createElement("td");D.appendChild(E)}};